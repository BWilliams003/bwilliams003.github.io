# Security Policy

> **Automated Security Documentation** | Generated by Kindo AI Security Bot | 2026-02-22

## Table of Contents
- [Supported Versions](#supported-versions)
- [Reporting a Vulnerability](#reporting-a-vulnerability)
- [Credential Management Policy](#credential-management-policy)
- [Branch Protection Policy](#branch-protection-policy)
- [Dependency Management](#dependency-management)
- [Security Scanning](#security-scanning)
- [Compliance References](#compliance-references)
- [Known Remediations](#known-remediations)

---

## Supported Versions

| Branch | Supported |
|--------|-----------|
| `main` | ✅ Active |
| Other branches | ❌ Not supported |

---

## Reporting a Vulnerability

**Please do NOT report security vulnerabilities via public GitHub Issues.**

### Private Disclosure Process
1. **Email**: Use GitHub's private vulnerability reporting feature
   - Go to: Security tab → Report a vulnerability
2. **Response Time**: Initial response within 48 hours
3. **Disclosure Timeline**: 90-day coordinated disclosure

### What to Include
- Description of the vulnerability
- Steps to reproduce
- Potential impact assessment
- Suggested remediation (optional)

---

## Credential Management Policy

### ⚠️ NEVER store credentials in this repository

This is a **public repository**. Any credentials committed here are immediately
exposed to the entire internet and MUST be considered compromised.

### Approved Credential Storage Methods

| Credential Type | Storage Method |
|----------------|----------------|
| OAuth client secrets | GitHub Secrets (`Settings → Secrets → Actions`) |
| API keys | GitHub Secrets |
| Tokens | GitHub Secrets |
| Verification tokens | GitHub Secrets |
| Database passwords | GitHub Secrets |

### Config File Rules
- `_config.yml` — **NO credentials**. Config values only.
- `.env` files — **NEVER commit**. Already in `.gitignore`.
- Any `*secret*`, `*key*`, `*token*` files — **NEVER commit**.

### If Credentials Are Accidentally Committed
1. **Immediately revoke** the exposed credential with the provider
2. Remove from git history using `git filter-repo` or BFG Repo Cleaner
3. Force-push the cleaned history
4. Notify affected parties
5. Document the incident

### Gitalk Comment System
If enabling Gitalk comments:
```yaml
# _config.yml - NEVER put real values here
comments: false  # Only set true when secrets are configured
# gitalk_client_id and gitalk_client_secret MUST use GitHub Secrets
```

Reference via environment in build pipeline:
```bash
GITALK_CLIENT_ID=${{ secrets.GITALK_CLIENT_ID }}
GITALK_CLIENT_SECRET=${{ secrets.GITALK_CLIENT_SECRET }}
```

### Font Awesome Kit ID
The Font Awesome kit ID (`font_awesome_id`) is a low-sensitivity identifier
but should be domain-restricted to prevent unauthorized usage:
1. Go to [fontawesome.com/kits](https://fontawesome.com/kits)
2. Select your kit → Settings → Allowed Domains
3. Add: `bwilliams003.github.io`

---

## Branch Protection Policy

### `main` Branch — Current Configuration

| Rule | Status | Recommended |
|------|--------|-------------|
| Require PR before merging | ✅ Enabled | ✅ Required |
| Required approving reviews | ✅ 1 reviewer | ⚠️ Consider 2 |
| Dismiss stale reviews | ✅ Enabled | ✅ Required |
| Require status checks | ✅ Enabled | ✅ Required |
| Enforce for admins | ❌ Disabled | ⚠️ Enable recommended |
| Require signed commits | ❌ Disabled | ⚠️ Enable recommended |
| Require last push approval | ❌ Disabled | ⚠️ Enable recommended |

### Recommended Hardening Steps
1. **Settings → Branches → main** → Enable "Do not allow bypassing the above settings"
   - Prevents admins from force-pushing to main
2. Enable "Require signed commits" for commit authenticity
3. Enable "Require approval of the most recent reviewable push"

---

## Dependency Management

### Ruby (Gemfile)
- All gems MUST be pinned with minimum version constraints
- `bundler-audit` runs in CI to check against CVE databases
- Update schedule: Monthly, or immediately on CVE disclosure
- Lock file (`Gemfile.lock`) SHOULD be committed for reproducible builds

### JavaScript (package.json)
- `npm audit` runs in CI for any npm dependencies
- `npm audit fix` should be run locally before committing

### Automated Scanning
CI pipeline (`.github/workflows/security-scan.yml`) runs:
- **bundler-audit** — Ruby gem CVE scanning
- **npm audit** — JavaScript dependency scanning
- **Semgrep** — SAST with OWASP Top 10 rules
- **Gitleaks** — Secret/credential detection
- **Supply chain check** — Gem pinning verification

---

## Security Scanning

### Tools Used
| Tool | Type | Scope |
|------|------|-------|
| [bundler-audit](https://github.com/rubysec/bundler-audit) | SCA | Ruby gems |
| [npm audit](https://docs.npmjs.com/cli/commands/npm-audit) | SCA | npm packages |
| [Semgrep](https://semgrep.dev) | SAST | Code + config |
| [Gitleaks](https://github.com/gitleaks/gitleaks) | Secrets | Git history |
| [OSV.dev](https://osv.dev) | CVE DB | Multi-ecosystem |

### Running Locally
```bash
# Ruby SCA
gem install bundler-audit
bundle-audit update && bundle-audit check

# Semgrep SAST
pip install semgrep
semgrep scan --config=p/owasp-top-ten --config=p/secrets .

# Gitleaks
gitleaks detect --source . --verbose
```

---

## Compliance References

### OWASP
- [OWASP Top 10 2021](https://owasp.org/www-project-top-ten/)
- [OWASP ASVS 4.0](https://owasp.org/www-project-application-security-verification-standard/)
- [OWASP Cheat Sheet — Secrets Management](https://cheatsheetseries.owasp.org/cheatsheets/Secrets_Management_Cheat_Sheet.html)
- [OWASP Cheat Sheet — Third Party JS](https://cheatsheetseries.owasp.org/cheatsheets/Third_Party_Javascript_Management_Cheat_Sheet.html)

### Security Standards
- [CWE-829: Inclusion of Functionality from Untrusted Control Sphere](https://cwe.mitre.org/data/definitions/829.html)
- [CWE-798: Use of Hard-coded Credentials](https://cwe.mitre.org/data/definitions/798.html)
- [NIST SP 800-218: Secure Software Development Framework](https://csrc.nist.gov/publications/detail/sp/800-218/final)

---

## Known Remediations

### 2026-02-22 — Kindo AI Security Scan

| ID | CVE | Severity | Package | Status |
|----|-----|----------|---------|--------|
| GHSA-4xjh-m3qx-49wc | CVE-2018-17567 | HIGH (7.5) | jekyll | ✅ Fixed: pinned `>= 4.3.4` |
| GHSA-52p9-v744-mwjj | CVE-2021-28834 | HIGH (9.8) | kramdown | ✅ Fixed: pinned `>= 2.3.1` |
| GHSA-mqm2-cgpr-p4m6 | CVE-2020-14001 | HIGH (9.8) | kramdown | ✅ Fixed: pinned `>= 2.3.1` |
| SNYK-CONFIG-GITALK | — | MEDIUM (4.3) | _config.yml | ✅ Fixed: removed credential fields |
| IaC-001 | — | MEDIUM (5.0) | Branch Protection | ⚠️ Manual: enable enforce_admins |
| IaC-002 | — | LOW (3.1) | Branch Protection | ⚠️ Manual: enable signed commits |
| IaC-003 | — | LOW (3.1) | Branch Protection | ⚠️ Manual: last-push approval |

**Scan tools**: OSV.dev API, Semgrep, manual code review  
**Automated by**: Kindo AI Security Bot
