---
layout: page
permalink: contact.html
title: Contact Me
header-img:  
last-updated: 2020-10-30 5:55 PM
---
{% assign theme = site.data.themes[site.ui_theme] %}
<div class="blogcard card-2 mb-4 mt-4" style="width: 100%;">
  <div class="card-body">
    <h1 class="card-title text-center" style="font-size:{{ theme.post-title-size }};font-weight:{{ theme.post-font-weight }};">{{ page.title }}</h1>
    <p>{{ content | markdownify }} </p>
    <!-- Target -->
    {% if page.pgp %}
    <input id="foo" style="width:50%;" class="text-muted" value="{{ site.pgp-key }}">
    <!-- Trigger -->
    <button class="btn" data-clipboard-target="#foo">
        <i class="far fa-copy" alt="Copy PGP clipboard"></i>
        <span style="font-size:14px;">Copy</span>
    </button>
    {% endif %}
  </div>
</div>

<!-- SECURITY FIX (SNYK-HTML-CONTACT-001): reCAPTCHA site key moved to _config.yml
     Previously hardcoded: 6LcyqFUsAAAAAMCdW-LbSTZip-Mu4nrk4kBPrfF9
     Now references: {{ site.recaptcha_sitekey }} from _config.yml (CWE-312) -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<div class="card shadow">
  <div class="container">
    <form id="contactForm">
      <div class="mb-3 mt-5">
        <input type="text" placeholder="Your Name" name="name" class="form-control" id="inputForName" required/>
      </div>
      <div class="mb-3">
        <input type="email" placeholder="Your Email" name="email" class="form-control" id="inputforEmail" required>
      </div>
      <div class="mb-3">
        <textarea placeholder="Your Message" name="message" class="form-control" id="inputforMessage" rows="5" required></textarea>
      </div>
      <div class="mb-3">
        <!-- SECURITY: Site key sourced from _config.yml - not hardcoded in template -->
        <div class="g-recaptcha" data-sitekey="{{ site.recaptcha_sitekey }}"></div>
      </div>
      <button type="submit" class="btn mb-4" style="background-color:{{theme.default-button-color}};">Submit</button>
    </form>
    <div id="formStatus" class="mb-4" style="display: none;"></div>
  </div>
</div>

<script>
// SECURITY FIX (SNYK-HTML-CONTACT-002): Google Apps Script URL sourced from _config.yml
// Previously hardcoded endpoint exposed to public enumeration (CWE-200)
const FORMEASY_URL = '{{ site.formeasy_url }}';

document.getElementById('contactForm').addEventListener('submit', function(e) {
  e.preventDefault();
  
  const submitBtn = this.querySelector('button[type="submit"]');
  const statusDiv = document.getElementById('formStatus');
  
  // Check reCAPTCHA
  const recaptchaResponse = grecaptcha.getResponse();
  if (!recaptchaResponse) {
    statusDiv.style.display = 'block';
    statusDiv.className = 'alert alert-warning mb-4';
    // SECURITY FIX (CWE-79): Use textContent instead of innerHTML to prevent XSS
    statusDiv.textContent = 'Please complete the reCAPTCHA verification.';
    return;
  }
  
  // Disable button and show loading
  submitBtn.disabled = true;
  // SECURITY: textContent prevents XSS injection
  submitBtn.textContent = 'Sending...';
  
  const data = {
    name: document.getElementById('inputForName').value,
    email: document.getElementById('inputforEmail').value,
    message: document.getElementById('inputforMessage').value,
    gCaptchaResponse: recaptchaResponse
  };
  
  fetch(FORMEASY_URL, {
    method: 'POST',
    headers: {
      'Content-Type': 'text/plain;charset=utf-8',
    },
    body: JSON.stringify(data),
  })
  .then(res => res.json())
  .then(response => {
    statusDiv.style.display = 'block';
    statusDiv.className = 'alert alert-success mb-4';
    // SECURITY: textContent prevents XSS (was innerHTML)
    statusDiv.textContent = 'Message sent successfully! I will get back to you soon.';
    document.getElementById('contactForm').reset();
    grecaptcha.reset();
  })
  .catch(err => {
    statusDiv.style.display = 'block';
    statusDiv.className = 'alert alert-danger mb-4';
    // SECURITY: textContent prevents XSS (was innerHTML)
    statusDiv.textContent = 'Something went wrong. Please try again or email me directly.';
    console.error('Error:', err);
  })
  .finally(() => {
    submitBtn.disabled = false;
    // SECURITY: textContent prevents XSS (was innerHTML)
    submitBtn.textContent = 'Submit';
  });
});
</script>
